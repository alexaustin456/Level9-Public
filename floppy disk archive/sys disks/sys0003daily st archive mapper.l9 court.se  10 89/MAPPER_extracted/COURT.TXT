; Court.TXT Copyright (C) 1989 Level 9 Computing.
;
; for Floor Map Editor.
;
; N.W.Austin 28/6/89
;
;-----

; draw flags are...
; dRemoveRedraw=65535  -1 Remove and redraw
; dInsert=0            insert
; dPlot=1              plot as sprite
; dInsertRedraw=2      insert and redraw
; dMarkPreload=3       mark to preload
; dSetProtect=4        set protection mark
; dUnsetProtect=5      unset protection mark

var
 JudgeACB

begin

;-----

.CourtRoom
 dv1=1600 ;Laywer 1
 gosub @PreLoad100
 dv1=1700 ;Laywer 2
 gosub @PreLoad100
 dv1=1800 ;Laywer 3
 gosub @PreLoad100
 dv1=1900 ;Laywer 4/scenery, animation
 gosub @PreLoad100
 dv1=2000 ;Judge/Clerk
 gosub @PreLoad100

 gosub @MCinit3d ;* MCEmptyRoom

 dv1=399 ;courtroom +jury +foreground animation
 gosub @PreLoadAndInsertDV1

 gosub @MCBuildViewMap

 cif ST
  &v2=list4(16) ;ST palette
  v1=32
  add v2,v1
  v1=4          ;list4
  gosub @MCSetpalette
 cend 

 RasterOffset=1100 ;1600-1699
 ObjectNumber=2604 ;Defence lawyer, body with gestures
 dv2=224
 dv3=144
 dv4=80
 gosub @StartFreeACB

 RasterOffset=1100
 ObjectNumber=2602 ;Defence lawyer, looking up, head talking
 dv2=224
 dv3=144
 dv4=80
 gosub @StartFreeACB

 RasterOffset=0
 ObjectNumber=2640 ;Judges mouth+eyes
 dv2=144
 dv3=112
 dv4=96
 gosub @StartFreeACB

 ObjectNumber=2614 ;Judges hands at rest
 dv2=144
 dv3=112
 dv4=80
 gosub @StartFreeACB
 JudgeACB=dx4

 ObjectNumber=2646 ;Clerks pen
 dv2=140 ;* 148
 dv3=120
 dv4=64
 gosub @StartFreeACB

.Court
 code-
 random v1
 code+
 if v1>2 then NoHammer

 dx4=JudgeACB
 ObjectNumber=2611 ;Judges hands/hammer
 gosub @ChangeACBdx4

.NoHammer
 gosub @ScanKeyboard
 gosub @ScanJoystick
 if KeyCode=16 then @Escape
 gosub @DisplayEverything
 goto Court

;-----

